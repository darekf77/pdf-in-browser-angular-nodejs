"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var options_backend_1 = require("./options.backend");
var tape_store_backend_1 = require("./tape-store.backend");
var server_backend_1 = require("./server.backend");
var request_handler_backend_1 = require("./request-handler.backend");
var TalkbackFactory = /** @class */ (function () {
    function TalkbackFactory() {
    }
    TalkbackFactory.server = function (options) {
        var fullOptions = options_backend_1.default.prepare(options);
        return new server_backend_1.default(fullOptions);
    };
    TalkbackFactory.requestHandler = function (options) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var fullOptions, tapeStore;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        fullOptions = options_backend_1.default.prepare(options);
                        tapeStore = new tape_store_backend_1.default(fullOptions);
                        return [4 /*yield*/, tapeStore.load()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, new request_handler_backend_1.default(tapeStore, fullOptions)];
                }
            });
        });
    };
    return TalkbackFactory;
}());
exports.default = TalkbackFactory;
//# sourceMappingURL=talkback-factory.backend.js.map