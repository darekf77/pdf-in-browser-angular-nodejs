"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tnp_core_1 = require("tnp-core");
var helpers_1 = require("../helpers");
var typescript_class_helpers_1 = require("typescript-class-helpers");
var abstractClasses = ['BASE_CONTROLLER'];
function activateBaseCrud(target, entity, entites, context) {
    if (tnp_core_1._.isFunction(target) && helpers_1.MorphiHelpers.hasParentClassWithName(target, 'BaseCRUD') &&
        !abstractClasses.includes(typescript_class_helpers_1.CLASS.getName(target))) {
        if (tnp_core_1._.isUndefined(entity)) {
            if (typescript_class_helpers_1.CLASS.getName(target) === typescript_class_helpers_1.CLASS.getName(target['__proto__'])) {
                // console.log(`Site class override curd for ${getClassName(target)}`)
                return;
            }
            //#region @backend
            if (context.mode === 'backend/frontend') {
                //#endregion
                !global.hideLog && console.warn("\n        You are extending BaseCRUD class.. CRUD functionality won't work\n        unless you provide \"entity\" property for CRUD operations on db.\n        @Morphi.Controller({\n          ...\n          entity: <YOUR ENTITY CLASS HERE>\n          ...\n        })\n        class " + typescript_class_helpers_1.CLASS.getName(target) + " extends  ...\n              ");
                //#region @backend
            }
            //#endregion
        }
        else {
            // console.log(`Traget ${target.name} has parent BaseCrud`)
            target.prototype['entity'] = entity;
            target.prototype['entites'] = [entity].concat(entites).filter(function (f) { return !!f; });
        }
    }
    else {
        // console.log(`Traget ${target.name} don't have parent BaseCrud`)
    }
}
exports.activateBaseCrud = activateBaseCrud;
//# sourceMappingURL=activate-base-crud.js.map