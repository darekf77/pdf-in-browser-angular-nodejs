"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PUSH_FEATURE = exports.FEATURE = void 0;
var _ = require("lodash");
var project_backend_1 = require("../project.backend");
function FEATURE(args) {
    var project = project_backend_1.Project.nearestTo(process.cwd());
    project.helpers.run("git checkout develop && git pull origin develop && git checkout -b \"feature/" + args.join(' ') + "\"").sync();
    process.exit(0);
}
exports.FEATURE = FEATURE;
function PUSH_FEATURE(args) {
    var project = project_backend_1.Project.nearestTo(process.cwd());
    var commitMsg = args.join(' ').trim();
    var issuNumberString = (_.first(args) || '').replace(/^\[/, '').replace(/\]$/, '');
    commitMsg = commitMsg.replace(issuNumberString, "[" + issuNumberString + "]");
    if (commitMsg.search(':') !== -1) {
        var split = commitMsg.split(':');
        commitMsg = split.join(':\n');
    }
    if (commitMsg.search(' - ') !== -1) {
        var split = commitMsg.split(' - ');
        commitMsg = split.join('\n- ');
    }
    var branchName = "feature/" + issuNumberString + "-" + _.kebabCase(args.slice(1).join(' '));
    var command = 
    // `git stash && git checkout develop && git stash apply && ` +
    "git checkout -b \"" + branchName + "\" && " +
        ("git commit -m \"" + commitMsg + "\n\" && ") +
        ("git push origin " + branchName);
    project.helpers.run(command).sync();
    process.exit(0);
}
exports.PUSH_FEATURE = PUSH_FEATURE;
exports.default = {
    FEATURE: FEATURE,
    PUSH_FEATURE: PUSH_FEATURE,
    PF: function (args) {
        PUSH_FEATURE(args);
    }
};
//# sourceMappingURL=FEATURE.backend.js.map