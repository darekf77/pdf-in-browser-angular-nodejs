"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var notifications_service_1 = require("../notifications/notifications.service");
var modal_service_1 = require("../modal/modal.service");
var ng2_rest_1 = require("ng2-rest");
var core_1 = require("@angular/core");
var ErrorsNotyficationsService = /** @class */ (function () {
    function ErrorsNotyficationsService(notification, modal) {
        this.notification = notification;
        this.modal = modal;
    }
    ErrorsNotyficationsService.prototype.init = function (subscribtionsArray, template, callback) {
        var _this = this;
        subscribtionsArray.push(ng2_rest_1.Resource.listenErrors.subscribe(function (err) {
            var notify = _this.notification.error(err.msg);
            subscribtionsArray.push(notify.onTap.subscribe(function () {
                callback(err);
                _this.modal.open(template);
            }));
        }));
    };
    ErrorsNotyficationsService = tslib_1.__decorate([
        core_1.Injectable(),
        tslib_1.__metadata("design:paramtypes", [notifications_service_1.NotificationsService,
            modal_service_1.ModalService])
    ], ErrorsNotyficationsService);
    return ErrorsNotyficationsService;
}());
exports.ErrorsNotyficationsService = ErrorsNotyficationsService;
//# sourceMappingURL=errors-notyfications.service.js.map